#!/bin/sh
# This is a template execution script for
# running the execute pipeline.
#
# Variables surrounded by curly braces will be expanded
# when generating a specific execution script.
# Some example variables are:
#   - experiment_run_dir (Will be replaced with the experiment directory)
#   - command (Will be replaced with the command to run the experiment)
#   - log_dir (Will be replaced with the logs directory)
#   - experiment_name (Will be replaced with the name of the experiment)
#   - workload_run_dir (Will be replaced with the directory of the workload
#   - application_name (Will be repalced with the name of the application)
#   - n_nodes (Will be replaced with the required number of nodes)
#   Any experiment parameters will be available as variables as well.

cd "/home/jastewart/ramble/var/ramble/workspaces/beatnik_test/experiments/beatnik/standard/beatnik-env"

rm -f "/home/jastewart/ramble/var/ramble/workspaces/beatnik_test/experiments/beatnik/standard/beatnik-env/beatnik-env.out"
touch "/home/jastewart/ramble/var/ramble/workspaces/beatnik_test/experiments/beatnik/standard/beatnik-env/beatnik-env.out"
export OMP_NUM_THREADS="1";
. /home/jastewart/spack/share/spack/setup-env.sh
spack env activate /home/jastewart/ramble/var/ramble/workspaces/beatnik_test/software/beatnik-env
mpirun -n 1 beatnik1.0 {flags} >> "/home/jastewart/ramble/var/ramble/workspaces/beatnik_test/experiments/beatnik/standard/beatnik-env/beatnik-env.out" 2>&1
